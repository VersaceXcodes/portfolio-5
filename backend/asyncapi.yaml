asyncapi: 2.0.0
info:
  title: ShowcaseCraft Realtime API
  version: 1.0.0
  description: Realtime events for the ShowcaseCraft web application.
servers:
  development:
    url: http://localhost:3000
    protocol: ws
channels:
  user/authentication:
    description: Channel for authentication status updates.
    subscribe:
      operationId: onAuthenticationUpdate
      summary: Listen for authentication state changes.
      message:
        payload:
          type: object
          properties:
            current_user:
              type: object
              properties:
                user_id:
                  type: string
                email:
                  type: string
                name:
                  type: string
                created_at:
                  type: string
              nullable: true
            auth_token:
              type: string
              nullable: true
            authentication_status:
              type: object
              properties:
                is_authenticated:
                  type: boolean
                is_loading:
                  type: boolean
            error_message:
              type: string
              nullable: true
  portfolio/updates:
    description: Channel for updates to user portfolios.
    subscribe:
      operationId: onPortfolioUpdated
      summary: Listen for updates on portfolios related to the user.
      message:
        payload:
          type: object
          properties:
            id:
              type: string
            title:
              type: string
            template_id:
              type: string
            is_published:
              type: boolean
            created_at:
              type: string
            updated_at:
              type: string
  notifications:
    description: Channel for application-wide notifications.
    subscribe:
      operationId: onNotificationReceive
      summary: Listen for application notifications.
      message:
        payload:
          type: object
          properties:
            type:
              type: string
            message:
              type: string
            timestamp:
              type: string
  analytics/updates:
    description: Channel for real-time updates of analytics related to user portfolios.
    subscribe:
      operationId: onAnalyticsUpdate
      summary: Listen for updates to portfolio analytics.
      message:
        payload:
          type: object
          properties:
            analytics_id:
              type: string
            portfolio_id:
              type: string
            page_views:
              type: integer
            unique_visitors:
              type: integer
            average_time_spent:
              type: integer
  contact/form/submit:
    description: Channel for notifications when a contact form is submitted.
    subscribe:
      operationId: onContactFormSubmit
      summary: Listen for new contact form submissions.
      message:
        payload:
          type: object
          properties:
            contact_id:
              type: string
            portfolio_id:
              type: string
            name:
              type: string
            email:
              type: string
            message:
              type: string
            received_at:
              type: string
  testimonials/new:
    description: Channel for updates when new testimonials are added.
    subscribe:
      operationId: onNewTestimonial
      summary: Listen for new testimonials added to portfolios.
      message:
        payload:
          type: object
          properties:
            testimonial_id:
              type: string
            portfolio_id:
              type: string
            author_name:
              type: string
            content:
              type: string
            date:
              type: string
components:
  schemas:
    User:
      type: object
      properties:
        user_id:
          type: string
        email:
          type: string
        name:
          type: string
        created_at:
          type: string
    Portfolio:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        template_id:
          type: string
        is_published:
          type: boolean
        created_at:
          type: string
        updated_at:
          type: string
    Notification:
      type: object
      properties:
        type:
          type: string
        message:
          type: string
        timestamp:
          type: string
